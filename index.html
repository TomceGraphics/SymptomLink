<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocMatch | AI Health Assistant</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --radius: 0.75rem;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #0f172a;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Subtler Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #cbd5e1;
        }

        /* Utilities mimicking Shadcn */
        .border-border {
            border-color: #e2e8f0;
        }

        .bg-background {
            background-color: #ffffff;
        }

        .bg-muted {
            background-color: #f8fafc;
        }

        .input-ring:focus-within {
            outline: none;
            box-shadow: 0 0 0 2px #fff, 0 0 0 4px #2563eb;
        }

        /* Animations */
        .fade-in {
            animation: enter 0.5s ease-out;
        }

        @keyframes enter {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900 min-h-screen">

    <!-- PATIENT PORTAL -->
    <section id="patient-section" class="fade-in">

        <!--LLM-STYLE HEADER -->
        <header class="max-w-3xl mx-auto px-6 py-20 md:py-[160px] text-center ">

            <div
                class="inline-block bg-blue-100 text-blue-700 text-[10px] font-bold px-3 py-1 rounded-full mb-6 uppercase tracking-wider">
                <i class="fas fa-sparkles mr-1"></i> AI Triage Assistant
            </div>

            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-4 leading-tight tracking-tight">
                How are you feeling?
            </h1>
            <p class="text-slate-500 text-lg mb-10 max-w-lg mx-auto leading-relaxed">
                Describe your symptoms in your own words. We’ll listen to your concerns and connect you with the right
                care team.
            </p>

            <!--LLM INPUT BAR -->
            <div class="relative max-w-2xl mx-auto px-4">
                <div
                    class="flex items-center bg-white border border-slate-200 rounded-[32px] p-2 shadow-sm transition-all focus-within:shadow-md focus-within:border-slate-300">

                    <textarea id="symptomInput" placeholder="Describe your symptoms..." rows="1"
                        class=" placeholder:text-sm md:placeholder:text-base placeholder:truncate flex-grow bg-transparent pl-4 pr-2 py-3 text-[16px] md:text-[17px] text-slate-700 placeholder:text-slate-400 outline-none resize-none max-h-48 overflow-y-auto leading-normal"
                        oninput="this.style.height = 'auto'; this.style.height = this.scrollHeight + 'px'"></textarea>

                    <div class="flex items-center gap-2 pr-1 flex-shrink-0">
                        <button
                            class="w-10 h-10 flex items-center justify-center text-slate-400 hover:text-slate-600 transition-colors">
                            <i class="fa-solid fa-microphone text-xl"></i>
                        </button>

                        <!-- SUBMIT BUTTON -->
                        <button onclick="triggerSearch()"
                            class="w-11 h-11 bg-blue-600 text-white rounded-full flex items-center justify-center shadow-lg shadow-blue-200 hover:bg-blue-700 active:scale-95 transition-all">
                            <i class="fa-solid fa-arrow-up text-lg"></i>
                        </button>

                    </div>
                </div>
            </div>
            <!-- AI Status Text -->
            <div class="h-8 mt-4 flex items-center justify-center gap-2 opacity-0 transition-opacity duration-300"
                id="ai-status">
                <div class="flex gap-1">
                    <div class="w-2 h-2 bg-blue-600 rounded-full animate-bounce"></div>
                    <div class="w-2 h-2 bg-blue-600 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                    <div class="w-2 h-2 bg-blue-600 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                </div>
                <span class="text-xs font-bold text-blue-600 uppercase tracking-widest"
                    id="ai-status-text">Processing</span>
            </div>

            <!-- DISCLAIMER -->
            <div
                class="mt-10 flex items-center justify-center gap-2 text-slate-400 opacity-70 hover:opacity-100 transition-opacity duration-300">
                <p class="text-[10px] tracking-wide">
                    <strong>Medical Disclaimer:</strong> Your health is personal. While our AI can guide you, please
                    consult a professional for medical diagnosis.
                </p>
            </div>
        </header>

        <main class="max-w-6xl mx-auto px-6 pb-24">
            <div class="flex items-center justify-between mb-8 gap-2">
                <h2 class="text-xl md:text-2xl font-bold text-slate-800">Suggested Specialists</h2>
                <div class="h-1 flex-grow mx-4 bg-slate-100 rounded-full hidden md:block"></div>
                <span id="results-pill"
                    class="bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-full whitespace-nowrap flex-shrink-0">Database
                    Ready</span>
            </div>

            <!-- DOCTOR GRID -->
            <div id="doctorGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Cards injected here -->
            </div>

            <!-- NO RESULTS STATE -->
            <div id="no-results" class="hidden text-center py-20">
                <div
                    class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-400">
                    <i class="fas fa-search"></i>
                </div>
                <p class="text-slate-500 font-medium">We couldn't match those keywords to a specialist.</p>
                <button onclick="showAllDoctors()" class="mt-4 text-blue-600 font-bold underline">Browse all
                    doctors</button>
            </div>
        </main>
    </section>

    <!-- DOCTOR LOGIN SECTION -->
    <section id="login-section" class="hidden fade-in py-20">
        <div class="max-w-md mx-auto px-6">
            <div class="bg-white rounded-[2.5rem] p-10 border border-slate-200 shadow-xl text-center">
                <div
                    class="w-20 h-20 bg-blue-50 text-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-user-md text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">Doctor Access</h2>
                <p class="text-slate-500 mb-8 text-sm">Please enter your credentials.</p>

                <div class="space-y-4 text-left">
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Username</label>
                        <input type="text" id="login-user" placeholder="e.g. sarah"
                            class="w-full p-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Password</label>
                        <input type="password" id="login-pass" placeholder="••••••••"
                            class="w-full p-4 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all">
                    </div>
                    <button onclick="handleLogin()"
                        class="w-full py-5 bg-blue-600 text-white rounded-2xl font-bold text-lg hover:bg-blue-700 transition-all shadow-lg shadow-blue-100">
                        Sign In
                    </button>
                    <p class="text-center text-xs text-slate-400 mt-4">Hint: check doctors.json (e.g., sarah/123)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- DOCTOR DASHBOARD -->
    <section id="doctor-dashboard" class="hidden fade-in">
        <div class="max-w-6xl mx-auto px-6 py-12">
            <div class="flex justify-between items-end mb-10">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900" id="doc-dash-title">Welcome back, Dr.</h1>
                    <p class="text-slate-500">Here are your upcoming matches for today.</p>
                </div>
                <button onclick="logout()"
                    class="px-6 py-2 border border-slate-200 rounded-xl hover:bg-slate-100 transition-colors text-sm font-bold">Logout</button>
            </div>

            <div class="grid grid-cols-1 gap-6" id="doctor-app-list">
                <!-- Doctor's specific appointments here -->
            </div>
        </div>
    </section>

    <!-- ADMIN PANEL -->
    <section id="admin-section" class="hidden fade-in">
        <div class="max-w-6xl mx-auto px-6 py-12">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
                <div>
                    <h1 class="text-3xl font-bold text-slate-900">Admin Dashboard</h1>
                    <p class="text-slate-500">System-wide appointment management.</p>
                </div>
                <div class="bg-white px-6 py-3 rounded-2xl border border-slate-200 shadow-sm">
                    <p class="text-xs font-bold text-slate-400 uppercase">System Status</p>
                    <p class="text-green-500 font-bold">JSON DB Connected</p>
                </div>
            </div>

            <div class="bg-white rounded-3xl border border-slate-200 shadow-xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="bg-slate-50 border-b border-slate-200">
                                <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Patient</th>
                                <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Doctor Match
                                </th>
                                <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest">Date & Time
                                </th>
                                <th class="p-6 text-xs font-bold text-slate-400 uppercase tracking-widest text-right">
                                    Actions</th>
                            </tr>
                        </thead>
                        <tbody id="admin-table-body"></tbody>
                    </table>
                </div>
                <div id="admin-empty" class="py-32 text-center text-slate-400 hidden">
                    <p class="text-lg">No system-wide records.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- BOOKING MODAL -->
    <div id="bookingModal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md p-4">
            <div class="bg-white rounded-[2rem] shadow-2xl overflow-hidden animate-in zoom-in duration-300">
                <div class="p-8 bg-blue-600 text-white">
                    <h3 class="text-2xl font-bold mb-1" id="modal-doc-name"></h3>
                    <p class="text-blue-100 text-sm" id="modal-doc-specialty"></p>
                </div>
                <div class="p-8 space-y-5">
                    <div>
                        <label class="block text-xs font-bold text-slate-400 uppercase mb-2">Patient Name</label>
                        <input type="text" id="form-name"
                            class="w-full p-4 rounded-2xl border border-slate-200 outline-none">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="date" id="form-date" class="p-4 rounded-2xl border border-slate-200">
                        <input type="time" id="form-time" class="p-4 rounded-2xl border border-slate-200">
                    </div>
                    <button onclick="submitBooking()"
                        class="w-full py-5 bg-blue-600 text-white rounded-2xl font-bold">Confirm Match</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TOAST -->
    <div id="toast"
        class="fixed bottom-8 left-1/2 -translate-x-1/2 z-[200] bg-slate-900 text-white px-8 py-4 rounded-2xl shadow-2xl flex items-center gap-3 transition-all duration-500 opacity-0 translate-y-10 pointer-events-none">
        <i class="fas fa-check-circle text-blue-400"></i>
        <span id="toast-msg">Success!</span>
    </div>

    <!-- Main Application Logic -->
    <script src="script.js"></script>
</body>

</html>